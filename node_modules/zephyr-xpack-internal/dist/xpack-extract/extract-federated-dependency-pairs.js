"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.extractFederatedDependencyPairs = extractFederatedDependencyPairs;
const zephyr_agent_1 = require("zephyr-agent");
const iterate_federated_remote_config_1 = require("./iterate-federated-remote-config");
function extractFederatedDependencyPairs(config) {
    const depsPairs = [];
    const { zephyrDependencies } = (0, zephyr_agent_1.readPackageJson)(config.context ?? process.cwd());
    if (zephyrDependencies) {
        Object.entries(zephyrDependencies).map(([name, version]) => {
            depsPairs.push({ name, version });
        });
    }
    (0, iterate_federated_remote_config_1.iterateFederatedRemoteConfig)(config, (remotesConfig) => {
        if (!remotesConfig?.remotes)
            return;
        Object.entries(remotesConfig.remotes).map(([remote_name, remote_version]) => {
            depsPairs.push({
                name: remote_name,
                version: remote_version,
            });
        });
    });
    return depsPairs
        .flat()
        .filter((dep) => (0, zephyr_agent_1.is_zephyr_dependency_pair)(dep));
}
//# sourceMappingURL=extract-federated-dependency-pairs.js.map